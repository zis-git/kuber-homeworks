# Домашнее задание к занятию «Сетевое взаимодействие в K8S. Часть 1» Голоха Е.В.

Цель работы  
Обеспечить доступ к приложению, состоящему из двух контейнеров (nginx и multitool), по разным портам:
— внутри кластера Kubernetes;
— снаружи кластера.

---

Используемый стенд  
Kubernetes: MicroK8s  
ОС: Debian GNU/Linux 13 (trixie)  
IP узла кластера: 192.168.88.20  

---

Задание 1. Доступ к контейнерам внутри кластера

1. Deployment

Был создан Deployment приложения с двумя контейнерами:
— nginx  
— multitool  

Количество реплик: 3.

Манифест Deployment:  
01-deploy-nginx-multitool.yaml

В каждом Pod одновременно работают контейнеры nginx и multitool.

---

2. Service для доступа внутри кластера

Для доступа к контейнерам был создан Service типа ClusterIP со следующими портами:
— порт 9001 → контейнер nginx (порт 80);
— порт 9002 → контейнер multitool (порт 8080).

Манифест Service:  
02-service-web.yaml

---

3. Проверка доступа из другого Pod

Для проверки был создан отдельный Pod с образом multitool.

Манифест Pod:  
03-multitool-pod.yaml

Из данного Pod выполнены проверки с помощью curl:

— доступ к nginx:
curl -sS web-svc:9001 | head

— доступ к multitool:
curl -sS web-svc:9002 | head

Также был проверен доступ по доменному имени сервиса Kubernetes:
curl -sS web-svc.default.svc.cluster.local:9001 | head -n 3

Все проверки завершились успешно.

Скриншоты:
-<img width="1061" height="358" alt="2026-01-28_15-55-50" src="https://github.com/user-attachments/assets/6403b266-3efe-406b-9628-8b706ff75947" /> — доступ к web-svc:9001 и web-svc:9002, а также проверка по имени сервиса.
- <img width="1192" height="88" alt="2026-01-28_15-55-31" src="https://github.com/user-attachments/assets/a88985ab-7dbf-487c-9754-19ba50396063" /> — доступ по FQDN web-svc.default.svc.cluster.local.
- <img width="1180" height="289" alt="2026-01-28_15-54-30" src="https://github.com/user-attachments/assets/e82d58cd-8af0-466f-a31a-033fd769f086" /> — вывод curl для портов 9001 и 9002.
- <img width="865" height="228" alt="2026-01-28_15-53-43" src="https://github.com/user-attachments/assets/6b57169d-ced5-4510-b826-dbeb13ed6fa6" /> — ответ контейнера multitool.

---

Задание 2. Доступ к приложению снаружи кластера

Для обеспечения внешнего доступа к nginx был создан отдельный Service типа NodePort.

Service открывает контейнер nginx наружу через порт 30080.

Манифест Service:  
06-web-nginx-nodeport.yaml

---

Проверка внешнего доступа

Доступ к nginx был проверен с помощью curl по IP узла Kubernetes и NodePort:

curl -I http://192.168.88.20:30080

В ответ получен статус HTTP/1.1 200 OK, что подтверждает успешный доступ к приложению снаружи кластера.

Скриншот:
- <img width="656" height="214" alt="2026-01-28_15-59-26" src="https://github.com/user-attachments/assets/15161b06-e12d-41f0-bad4-ac0da39f5c99" /> — результат curl с кодом ответа 200 OK.

---

Вывод  
В ходе работы был успешно настроен доступ к контейнерам приложения по разным портам как внутри Kubernetes-кластера, так и снаружи, с использованием Service типов ClusterIP и NodePort.
